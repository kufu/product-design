---
export async function getStaticPaths() {
  const documents = await Astro.glob('../documents/[!_]*.{md,mdx}')

  return documents.map((document) => {
    return {
      params: { title: document.frontmatter.title },
      props: { document },
    }
  })
}

const { title } = Astro.params
const { document } = Astro.props

const redirectUrl = document.frontmatter.title === title ? `http://localhost:3000${document.url}` : `http://localhost:3000/404`
---

<head>
  <meta http-equiv="refresh" content={`0; url=${redirectUrl}`} />
</head>
